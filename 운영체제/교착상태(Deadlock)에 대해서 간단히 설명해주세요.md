## 교착상태(Deadlock)에 대해서 간단히 설명해주세요.

교착상태 Deadlock이란,
둘 이상의 thread가 각기 다른 thread가 점유하고 있는 자원을 서로 기다릴 때 무한 대기에 빠지는 상황을 말합니다.
-> 여러 개의 thread에서 각기 다른 thread가 점유하고 있는 자원을 서로 기다리면서 무한 대기에 빠지는 상황을 말합니다.

Deadlock의 발생 조건은
상호 배제, 점유 대기, 비선점, 순환 대기입니다.
이 4가지 조건을 동시에 성립할 때 데드락이 발생할 수 있습니다. (반드시 발생하는 것은 아닙니다.)

Deadlock의 해결 방법은
무시, 예방, 회피, 탐지-회복
4가지 방법이 있습니다.

-> Deadlock의 발생 조건도 4가지( 상호배제, 점유대기, 비선점, 순환대기 ), 해결 방법( 무시, 예방, 회피, 탐지-회복 )도 4가지이다.


### Deadlock 이란?

![image](https://github.com/acrnm148/CS_STUDY/assets/67724306/af8e4d76-41f8-4195-95f5-92be962061fd)

- thread1이 리소스1을 점유하여 lock을 걸어놓은 상태입니다.
- thread2가 리소스2를 점유하여 lock을 걸어놓은 상태입니다.
- 각각의 thread들이 잘 진행되고 있다가, thread1이 리소스2가 필요한 상황입니다.
- thread1이 리소스2를 요청하였으나 리소스2는 thread2에 의해 lock이 된 상태이므로 **더 이상 진행하지 못하고 기다리고 있습니다.**
- thread2도 진행 도중 리소스1이 필요한 상황이 왔습니다.
- thread2가 리소스1을 요청하였으나 리소스1은 thread1에 의해 lock이 걸린 상태이므로 thread2 또한 **더 이상 진행하지 못하고 기다리고 있습니다.**
  
=> 이렇게 **여러 개의 thread들이 더 이상 진행되지 못하고 "동시에 무한 대기에 빠지는 현상"을 데드락이라고 합니다.**


## Deadlock 발생 조건
Deadlock은 다음 4가지 조건이 동시에 성립할 때 발생할 수 있습니다. (발생하지 않을 수도 있습니다.)

1. 상호배제 (mutual exclution)
   - **동시에 한 thread만 자원을 점유**할 수 있는 상황입니다.
        (=> 다른 thread가 자원을 사용하려면 자원이 방출(exit)될 때까지 기다려야 합니다. )
2. 점유대기 (hold-and-wait)
   - thread가 자원을 점유한 상태에서 **다른 thread가 점유한 자원을 추가로 기다리는 상황**입니다.
3. 비선점 (no preemption)
   - 다른 thread가 **사용 중인 자원을 강제로 선점할 수 없는** 상황입니다.
         (=> 자원을 점유하고 있는 thread에 의해서만 자원이 방출됩니다. )
4. 순환대기 (circular wait)
   - 대기 중인 **thread들이 순환 형태로 자원을 대기**하고 있는 상황입니다.


## Deadlock 해결 방법
Deadlock 문제를 해결하는 방법에는 무시, 회피, 예방, 탐지-회복 이 있습니다.

1. 무시
   - deadlock 발생 확률이 낮은 시스템에서 아무런 조치를 취하지 않고 deadlock을 무시하는 방법
   - 장점) 시스템 성능 저하가 없다. / 해결 비용이 들지 않는다.
   => 현대 시스템에서는 deadlock이 잘 발생하지 않고, 해결 비용이 크기 때문에 무시 방법이 많이 사용된다.
2. 회피
   - 쓰레드가 앞으로 자원을 어떻게 요청할지에 대한 정보를 통해 순환대기 상태가 발생하지 않도록 자원을 할당하는 방법
   => 자원할당그래프 알고리즘, 은행원 알고리즘을 사용하여 데드락을 회피한다.
3. 예방
   - 교착상태의 4가지 조건 중 하나의 조건이 성립하지  않게 하는 방법
   - 단점) 자원 사용의 효율성이 떨어지고, 비용이 크다.
4. 탐지-회복
   - 시스템 검사를 통해 데드락 발생을 탐지하고, 이를 회복시키는 방법
   - 단점) 자원 사용의 효율성이 떨어지고, 비용이 크다.


---

### deadlock은 언제 발생하나요?
```
deadlock은 상호배제, 점유대기, 비선점, 순환대기의 4가지 조건이 동시에 성립할 때 발생합니다.
상호배제는 동시에 한 thread만 자원을 점유할 수 있는 상황이고,
점유대기는 thread가 자원을 점유한 상태에서 이미 다른 thread가 점유하고 있는 자원이 추가로 필요할 때 대기하는 상황입니다.
비선점은 다른 thread가 사용 중인 자원을 강제로 선점할 수 없는 것이고,
순환대기는 대기 중인 thread들이 순환 형태로 자원을 대기하는 상황입니다.
```

### deadlock의 해결방법은?
```
deadlock을 해결하는 방법은 크게 4가지입니다.
무시, 예방, 회피, 탐지-회복 이며
현재는 무시 방법이 많이 사용되고 있습니다.
그 이유는
현대 시스템에서는 deadlock이 잘 발생하지 않고, 해결 비용도 들지 않기 때문입니다.
```


- 은행원 알고리즘이란?
- 자원할당그래프 알고리즘이란?
- 현대 시스템에서 교착상태가 발생하지 않는 이유?

